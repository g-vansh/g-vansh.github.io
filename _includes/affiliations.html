<div class="affiliations-container" id="affiliations-container">
  <div class="affiliations-header">
    <h3>Affiliations</h3>
  </div>
  
  <div class="affiliations-grid">
      {% assign sorted_affiliations = site.data.affiliations.affiliations | sort: 'order' %}
      {% for affiliation in sorted_affiliations %}
        {% assign affiliation_page = site.affiliations | where: 'slug', affiliation.description_file | first %}
        <a href="{{ affiliation_page.url | relative_url }}" class="affiliation-link">
          <div class="affiliation-item {{ affiliation.type }}" 
               data-affiliation="{{ affiliation.id }}"
               data-tooltip-content="{{ affiliation_page.content | strip_html | truncatewords: 30, '...' }} Click to read more â†’"
               role="button"
               tabindex="0"
               aria-label="Learn more about {{ affiliation.name }}"
               title="{{ affiliation.name }}">
          
          <div class="affiliation-logo">
            {% if affiliation.logo %}
              <img src="{{ affiliation.logo | relative_url }}" 
                   alt="{{ affiliation.logo_alt }}" 
                   loading="lazy"
                   onerror="this.style.display='none';">
            {% else %}
              <div class="affiliation-logo-fallback">
                <i class="fas fa-university" aria-hidden="true"></i>
                <span class="affiliation-short-name">{{ affiliation.short_name }}</span>
              </div>
            {% endif %}
          </div>
          
          <div class="affiliation-info">
            <h3 class="affiliation-name">{{ affiliation.name }}</h3>
            <span class="affiliation-type-badge {{ affiliation.type }}">
              {{ affiliation.type | capitalize }}
            </span>
          </div>
        </div>
        </a>
      {% endfor %}
  </div>
</div>
