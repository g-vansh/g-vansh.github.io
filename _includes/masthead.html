{% include base_path %}

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
        <nav id="site-nav" class="greedy-nav">
          <button aria-label="Toggle navigation menu"><div class="navicon"></div></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg"><a href="{{ base_path }}/">{{ site.title }}</a></li>
          {% for link in site.data.navigation.main %}
            {% if link.url contains 'http' %}
              {% assign domain = '' %}
              {% else %}
              {% assign domain = base_path %}
            {% endif %}
            <li class="masthead__menu-item"><a href="{{ domain }}{{ link.url }}">{{ link.title }}</a></li>
          {% endfor %}
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>

      <button class="mobile-menu-toggle" aria-expanded="false" aria-controls="mobile-nav-panel">
        <span class="mobile-menu-toggle__label">Menu</span>
        <span class="mobile-menu-toggle__icon" aria-hidden="true">
          <span></span>
          <span></span>
          <span></span>
        </span>
      </button>
    </div>
  </div>
</div>

{% assign linkedin_href = site.author.linkedin %}
{% if linkedin_href %}
  {% unless linkedin_href contains 'http' %}
    {% assign linkedin_href = 'https://www.linkedin.com/in/' | append: linkedin_href %}
  {% endunless %}
{% endif %}
{% assign github_href = site.author.github %}
{% if github_href %}
  {% unless github_href contains 'http' %}
    {% assign github_href = 'https://github.com/' | append: github_href %}
  {% endunless %}
{% endif %}
{% assign twitter_handle = site.author.twitter | default: site.twitter.username %}
{% if twitter_handle %}
  {% assign twitter_href = 'https://twitter.com/' | append: twitter_handle %}
{% endif %}

<div class="mobile-nav-overlay" id="mobile-nav-panel" aria-hidden="true">
  <div class="mobile-nav-overlay__header">
    <div class="mobile-nav-overlay__header-content">
      <p class="mobile-nav-overlay__eyebrow">Vansh Gupta</p>
      <p class="mobile-nav-overlay__tagline">Innovation Econ @ MIT</p>
    </div>
  </div>
  
  <div class="mobile-nav-overlay__inner">
    <ul class="mobile-nav-overlay__links">
      <li>
        <a href="{{ base_path }}/">Home</a>
      </li>
      {% for link in site.data.navigation.main %}
        {% unless link.title == "Nizam Map" or link.url contains "community-map" %}
          {% if link.url contains 'http' %}
            {% assign nav_domain = '' %}
            {% else %}
            {% assign nav_domain = base_path %}
          {% endif %}
          <li>
            <a href="{{ nav_domain }}{{ link.url }}">{{ link.title }}</a>
          </li>
        {% endunless %}
      {% endfor %}
    </ul>

    <div class="mobile-nav-overlay__action-buttons">
      <a class="mobile-nav-action-btn mobile-nav-action-btn--contact" href="mailto:vansh@mit.edu" aria-label="Contact Vansh Gupta via email">
        <span class="mobile-nav-action-btn__icon" aria-hidden="true">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
            <polyline points="22,6 12,13 2,6"></polyline>
          </svg>
        </span>
        <span class="mobile-nav-action-btn__text">Contact Me</span>
      </a>
      <a class="mobile-nav-action-btn mobile-nav-action-btn--download" href="{{ base_path }}/files/CV___Vansh_Gupta.pdf" download aria-label="Download Vansh Gupta's CV">
        <span class="mobile-nav-action-btn__icon" aria-hidden="true">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="7 10 12 15 17 10"></polyline>
            <line x1="12" y1="15" x2="12" y2="3"></line>
          </svg>
        </span>
        <span class="mobile-nav-action-btn__text">Download CV</span>
      </a>
    </div>

    <div class="mobile-nav-overlay__social">
      <span>Follow</span>
      <div class="mobile-nav-overlay__social-links">
        {% if linkedin_href %}
          <a href="{{ linkedin_href }}" target="_blank" rel="noopener">LinkedIn</a>
        {% endif %}
        {% if github_href %}
          <a href="{{ github_href }}" target="_blank" rel="noopener">GitHub</a>
        {% endif %}
        {% if twitter_href %}
          <a href="{{ twitter_href }}" target="_blank" rel="noopener">Twitter</a>
        {% endif %}
      </div>
    </div>
  </div>
</div>