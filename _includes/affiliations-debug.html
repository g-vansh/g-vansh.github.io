<div class="affiliations-container" id="affiliations-container">
  <div class="affiliations-header">
    <h3>Affiliations</h3>
    <button class="affiliations-toggle" id="affiliations-toggle" 
            aria-label="Toggle affiliations display" 
            aria-expanded="false" 
            aria-controls="affiliations-content">
      <i class="fas fa-university"></i>
      <span class="toggle-text">View Affiliations</span>
      <i class="fas fa-chevron-down toggle-arrow"></i>
    </button>
  </div>
  
  <div class="affiliations-content" id="affiliations-content">
    <div class="affiliations-grid">
      <p>Test content for debugging</p>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  console.log('Affiliations script loaded');
  
  const affiliationsContainer = document.getElementById('affiliations-container');
  const affiliationsToggle = document.getElementById('affiliations-toggle');
  const affiliationsContent = document.getElementById('affiliations-content');
  const toggleArrow = affiliationsToggle.querySelector('.toggle-arrow');
  const toggleText = affiliationsToggle.querySelector('.toggle-text');
  
  let isExpanded = false;
  
  // Toggle affiliations display
  function toggleAffiliations() {
    console.log('Toggle clicked, isExpanded:', isExpanded);
    isExpanded = !isExpanded;
    
    if (isExpanded) {
      affiliationsContent.style.maxHeight = affiliationsContent.scrollHeight + 'px';
      affiliationsContent.style.opacity = '1';
      affiliationsContainer.classList.add('expanded');
      toggleArrow.style.transform = 'rotate(180deg)';
      toggleText.textContent = 'Hide Affiliations';
      affiliationsToggle.setAttribute('aria-expanded', 'true');
    } else {
      affiliationsContent.style.maxHeight = '0';
      affiliationsContent.style.opacity = '0';
      affiliationsContainer.classList.remove('expanded');
      toggleArrow.style.transform = 'rotate(0deg)';
      toggleText.textContent = 'View Affiliations';
      affiliationsToggle.setAttribute('aria-expanded', 'false');
    }
  }
  
  // Event listeners
  affiliationsToggle.addEventListener('click', toggleAffiliations);
  
  console.log('Event listeners attached');
});
</script> 